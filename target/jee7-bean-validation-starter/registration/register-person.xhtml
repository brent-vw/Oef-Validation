<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        >

    <ui:composition template="/template.xhtml">
        <ui:define name="pageContent">
            <h1>#{msgs['page.register-person.title']}</h1>
            <h:form>
                <h:panelGroup id="firstNameGrp">
                <div class="form-group #{not component.findComponent('firstName').valid and facesContext.validationFailed ? 'has-error' : ''}">
                    <h:outputLabel for="firstName">#{msgs['label.firstName']}</h:outputLabel>
                    <h:inputText id="firstName" value="#{registrationFlowBean.person.firstName}" styleClass="form-control">
                        <f:ajax render="firstNameGrp" event="blur"/>
                    </h:inputText>
                    <h:message for="firstName" errorClass="control-label has-error"/>
                </div>
                </h:panelGroup>

                <h:panelGroup id="lastNameGrp">
                <div class="form-group #{not component.findComponent('lastName').valid and facesContext.validationFailed ? 'has-error' : ''}">
                    <h:outputLabel for="lastName">#{msgs['label.lastName']}</h:outputLabel>
                    <h:inputText id="lastName" value="#{registrationFlowBean.person.lastName}" styleClass="form-control">
                        <f:ajax render="lastNameGrp" event="blur"/>
                    </h:inputText>
                    <h:message for="lastName" errorClass="control-label has-error"/>
                </div>
                </h:panelGroup>

                <h:panelGroup id="birthDateGrp">
                <div class="form-group #{not component.findComponent('birthDate').valid and facesContext.validationFailed ? 'has-error' : ''}">
                    <h:outputLabel for="birthDate">#{msgs['label.birthDate']} <small>(yyyy-MM-dd)</small></h:outputLabel>
                    <h:inputText id="birthDate" value="#{registrationFlowBean.person.birthDate}" styleClass="form-control">
                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                        <f:ajax render="birthDateGrp" event="blur"/>
                    </h:inputText>
                    <h:message for="birthDate" errorClass="control-label has-error"/>
                </div>
                </h:panelGroup>

                <!-- TODO Add an email form-group here -->
                <h:panelGroup id="emailGrp">
                    <div class="form-group #{not component.findComponent('email').valid and facesContext.validationFailed ? 'has-error' : ''}">
                        <h:outputLabel for="email">#{msgs['label.email']} </h:outputLabel>
                        <h:inputText id="email" value="#{registrationFlowBean.person.email}" styleClass="form-control">
                            <f:ajax render="emailGrp" event="blur"/>
                        </h:inputText>
                        <h:message for="email" errorClass="control-label has-error"/>
                    </div>
                </h:panelGroup>

                <h:commandButton styleClass="btn btn-primary" value="#{msgs['links.next']}" action="register-address"/> <!-- Action is id of <view> -->
            </h:form>
        </ui:define>
    </ui:composition>

</html>
